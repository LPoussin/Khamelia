{% extends 'base.html.twig' %}

{% block title %}KhaMELIA - Enseigne/Medecin{% endblock %}
{% block stylesheets %}
	
	<link rel="stylesheet" href="{{ asset('assets/vendor/select2/select2.css') }}" />
	<link rel="stylesheet" href="{{ asset('assets/vendor/jquery-datatables-bs3/assets/css/datatables.css') }} " />
	<link rel="stylesheet" href="{{ asset('assets/vendor/pnotify/pnotify.custom.css') }} " />
	<link rel="stylesheet" href="{{ asset('assets/vendor/jquery-ui/css/ui-lightness/jquery-ui-1.10.4.custom.css') }}" />
	<link rel="stylesheet" href="{{ asset('assets/vendor/select2/select2.css') }}" />
	<link rel="stylesheet" href="{{ asset('assets/vendor/bootstrap-multiselect/bootstrap-multiselect.css') }}" />
	<link rel="stylesheet" href="{{ asset('assets/vendor/bootstrap-tagsinput/bootstrap-tagsinput.css') }}" />
	<link rel="stylesheet" href="{{ asset('assets/vendor/bootstrap-colorpicker/css/bootstrap-colorpicker.css') }}" />
	<link rel="stylesheet" href="{{ asset('assets/vendor/bootstrap-timepicker/css/bootstrap-timepicker.css') }}" />
	<link rel="stylesheet" href="{{ asset('assets/vendor/dropzone/css/basic.css') }}" />
	<link rel="stylesheet" href="{{ asset('assets/vendor/dropzone/css/dropzone.css') }}" />
	<link rel="stylesheet" href="{{ asset('assets/vendor/bootstrap-markdown/css/bootstrap-markdown.min.css') }}" />
	<link rel="stylesheet" href="{{ asset('assets/vendor/summernote/summernote.css') }}" />
	<link rel="stylesheet" href="{{ asset('assets/vendor/summernote/summernote-bs3.css') }}" />
	<link rel="stylesheet" href="{{ asset('assets/vendor/codemirror/lib/codemirror.css') }}" />
	<link rel="stylesheet" href="{{ asset('assets/vendor/codemirror/theme/monokai.css') }}" />

{% endblock %}

{% block position %}
	{{ position }}
{% endblock %}

{% block chemin %}
	{{ chemin }}
{% endblock %}

{% block body %}
<div class="row">
    <div class="col-md-6 col-lg-12 col-xl-6">
        <section class="panel">
            <header class="panel-heading">
                <div class="panel-actions">
                    <a href="{{ path('enseigne') }}" class="">
                    <button class="mb-xs mt-xs mr-xs btn btn-primary">
                            Retour 
                    </button>
                        
                    </a>
                    <a href="#" class="fa fa-caret-down"></a>
                </div>
        
                <h2 class="panel-title">
                   Liste des membres aux profiles Médécins
                </h2>
            </header>
            <div class="panel-body">
                <table class="table table-bordered table-striped mb-none " {% if allEnseignants is not empty %}id="datatable-default"{% endif %}>
                    <thead>
                        <tr>
                            <th class="center">Nom</th>
                            <th class="center">Prénom(s)</th>
                            <th class="center">Email</th>
                            <th class="center">Type</th>
                            <th class="center">actions</th>
                        </tr>
                    </thead>
                    <tbody>
                    	{% for enseignant in allEnseignants %}
                            <tr>
                                <td>{{ enseignant.nom }} </td>
                                <td>{{ enseignant.prenom }} </td>
                                <td>{{ enseignant.email }} </td>
                                <td>{{ enseignant.type == 6 ? "Entreprise" : "Particulier" }} </td>
                                <td>
                                    <a href="#modalAssocMatiere-{{ enseignant.id }}" 
                                        class="mb-xs mt-xs mr-xs btn btn-primary modal-with-form">
	                                    <span class="fa fa-book"></span>
	                                    Associer spécialité
	                                </a>
                                    <div id="modalAssocMatiere-{{ enseignant.id }}" class="modal-block modal-block-primary mfp-hide">
                                        <section class="panel">
                                            <header class="panel-heading">
                                                <h2 class="panel-title">Associer une / des spécialités</h2>
                                            </header>
                                            <div class="panel-body">
                                                <form action="" method="post">
                                                    <input type="hidden" name="_token" value="{{ csrf_token('associationMatiere') }}"/>
                                                    <input type="hidden" value="{{ enseignant.id }}" name="id_enseignant">
                                                        <div class="form-group mt-lg">
                                                            <label class="col-sm-3 control-label">Spécialité</label>
                                                            <div class="col-sm-9">
                                                                <select class="form-control" multiple="multiple" 
                                                                    data-plugin-multiselect data-plugin-options='{ "enableCaseInsensitiveFiltering": true }' 
                                                                    id="ms_example6" name="matieres[]" required="required">
                                                                    {% for matiere in allMatieres %}
                                                                        <option value="{{ matiere.id }}">
                                                                            {{ matiere.libelle }}
                                                                        </option>
                                                                    {% endfor %}
                                                                </select>
                                                            </div>									
                                                        </div>
                                                        <div class="form-group text-right pr-md">
                                                            <input type="submit" value="Ajouter / Mettre à jour" class="btn btn-primary">
                                                        </div>
                                                </form>
                                            </div>
                                            <footer class="panel-footer">
                                                <div class="row">
                                                    <div class="col-md-12 text-right">
                                                        <button class="btn btn-default modal-dismiss">Annuler</button>
                                                    </div>
                                                </div>
                                            </footer>
                                        </section>
                                    </div>

                                    <a href="#modalAssocMatiereDetail-{{ enseignant.id }}" 
                                        class="mb-xs mt-xs mr-xs btn btn-info modal-with-form">
	                                    <span class="fa fa-info"></span>
	                                    Détails
	                                </a>
                                    <div id="modalAssocMatiereDetail-{{ enseignant.id }}" class="modal-block modal-block-primary mfp-hide">
                                        <section class="panel">
                                            <header class="panel-heading">
                                                <h2 class="panel-title">Spécialité associée</h2>
                                            </header>
                                            <div class="panel-body">
                                                <ul class="list-group">
                                                    {% if allMatiereParEnseignants is not empty %}
                                                        {% for matiere in allMatiereParEnseignants[enseignant.id] is not defined ? [] : allMatiereParEnseignants[enseignant.id]  %}
                                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                                {{ matiere.libelle }}
                                                            </li>
                                                        {% endfor %}
                                                    {% else %}
                                                        Aucune assignation effectuée pour cet enseignan
                                                    {% endif %}
                                                </ul>
                                            </div>
                                            <footer class="panel-footer">
                                                <div class="row">
                                                    <div class="col-md-12 text-right">
                                                        <button class="btn btn-default modal-dismiss">Fermer</button>
                                                    </div>
                                                </div>
                                            </footer>
                                        </section>
                                    </div>
                                </td>
                            </tr>
                        {% else %}
                            <tr>
                                <td colspan="5">Aucun enseignant</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </section>
    </div>
</div>
{% endblock %}

{% block javascripts %}
	
	<script src="{{ asset('assets/vendor/select2/select2.js') }} "></script>
	<script src="{{ asset('assets/vendor/jquery-datatables/media/js/jquery.dataTables.js') }} "></script>
	<script src="{{ asset('assets/vendor/jquery-datatables/extras/TableTools/js/dataTables.tableTools.min.js') }} "></script>
	<script src="{{ asset('assets/vendor/jquery-datatables-bs3/assets/js/datatables.js') }} "></script>
	<script src="{{ asset('assets/vendor/pnotify/pnotify.custom.js') }}"></script>
	<script src="{{ asset('assets/javascripts/ui-elements/examples.modals.js') }}"></script>
	<script src="{{ asset('assets/javascripts/forms/examples.advanced.form.js') }}" /></script>

	<script src="{{ asset('assets/vendor/jquery-ui/js/jquery-ui-1.10.4.custom.js') }}"></script>
	<script src="{{ asset('assets/vendor/jquery-ui-touch-punch/jquery.ui.touch-punch.js') }}"></script>
	<script src="{{ asset('assets/vendor/select2/select2.js') }}"></script>
	<script src="{{ asset('assets/vendor/bootstrap-multiselect/bootstrap-multiselect.js') }}"></script>
	<script src="{{ asset('assets/vendor/jquery-maskedinput/jquery.maskedinput.js') }}"></script>
	<script src="{{ asset('assets/vendor/bootstrap-tagsinput/bootstrap-tagsinput.js') }}"></script>
	<script src="{{ asset('assets/vendor/bootstrap-colorpicker/js/bootstrap-colorpicker.js') }}"></script>
	<script src="{{ asset('assets/vendor/bootstrap-timepicker/js/bootstrap-timepicker.js') }}"></script>
	<script src="{{ asset('assets/vendor/fuelux/js/spinner.js') }}"></script>
	<script src="{{ asset('assets/vendor/dropzone/dropzone.js') }}"></script>
	<script src="{{ asset('assets/vendor/bootstrap-markdown/js/markdown.js') }}"></script>
	<script src="{{ asset('assets/vendor/bootstrap-markdown/js/to-markdown.js') }}"></script>
	<script src="{{ asset('assets/vendor/bootstrap-markdown/js/bootstrap-markdown.js') }}"></script>
	<script src="{{ asset('assets/vendor/codemirror/lib/codemirror.js') }}"></script>
	<script src="{{ asset('assets/vendor/codemirror/addon/selection/active-line.js') }}"></script>
	<script src="{{ asset('assets/vendor/codemirror/addon/edit/matchbrackets.js') }}"></script>
	<script src="{{ asset('assets/vendor/codemirror/mode/javascript/javascript.js') }}"></script>
	<script src="{{ asset('assets/vendor/codemirror/mode/xml/xml.js') }}"></script>
	<script src="{{ asset('assets/vendor/codemirror/mode/htmlmixed/htmlmixed.js') }}"></script>
	<script src="{{ asset('assets/vendor/codemirror/mode/css/css.js') }}"></script>
	<script src="{{ asset('assets/vendor/summernote/summernote.js') }}"></script>
	<script src="{{ asset('assets/vendor/bootstrap-maxlength/bootstrap-maxlength.js') }}"></script>
	<script src="{{ asset('assets/vendor/ios7-switch/ios7-switch.js') }}"></script>
	<script src="{{ asset('assets/javascripts/tables/examples.datatables.default.js') }}"></script>

		
{% endblock %}