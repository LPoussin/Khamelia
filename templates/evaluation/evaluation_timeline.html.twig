{# --ril-- #}
{% extends 'base.html.twig' %}

{% block title %}InetSCHOOLS - Timeline{% endblock %}
{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('assets/vendor/select2/select2.css') }}" />
    <link rel="stylesheet" href="{{ asset('assets/vendor/jquery-datatables-bs3/assets/css/datatables.css') }} " />
    <link rel="stylesheet" href="{{ asset('assets/vendor/pnotify/pnotify.custom.css') }} " />

    <link rel="stylesheet" href="{{ asset('assets/vendor/jquery-ui/css/ui-lightness/jquery-ui-1.10.4.custom.css') }} " />
    <link rel="stylesheet" href="{{ asset('assets/vendor/fullcalendar/fullcalendar.css') }} " />
    <link rel="stylesheet" href="{{ asset('assets/vendor/fullcalendar/fullcalendar.print.css" media="print') }} " />
{% endblock %}
{% block position %}
	{{ position }}
{% endblock %}

{% block chemin %}
	{{ chemin }}
{% endblock %}

{% block body %}
{% if 'enseignant' in UserDetails.profiles %}
  <div> <a href="{{path("evaluation",{id_enseigne:id_enseigne})}}" class="btn btn-success">Créer une évaluation</a> </div>
  
  {% endif %}
    <div class="timeline">
        <div class="tm-body">
            {% set pastMonth = '' %}
            {% for item in evaluations %}
                {# {% set dat = item.dateCours|date('Y-m-d') %}
                {% set fin = item.datetimeFin|date('H:i:m') %}
                {% if pastMonth != item.dateCours|date('F') ~' ' ~ item.dateCours|date('Y') %}
                    <div class="tm-title">
                        <h3 class="h5 text-uppercase">{{ item.dateCours|date('F') }} {{ item.dateCours|date('Y') }}</h3>
                    </div>
                    {% set pastMonth = item.dateCours|date('F') ~' ' ~ item.dateCours|date('Y') %}
                {% endif %} #}
                <ol class="tm-items">
                    <li>
                        <div class="tm-info">
                            <div class="tm-icon"><i class="fa fa-book"></i></div>
                            <time class="tm-datetime" datetime="{{ item.dateCompo|date('d-m-Y') }} {#{ item.datetimeDebut|date('H') }} : {{ item.datetimeDebut|date('i') }#}">
                                <div class="tm-datetime-date">  {{ item.dateCompo|date('d-m-Y') }} </div>
                                {#<div class="tm-datetime-time">{{ item.datetimeDebut|date('H') }} : {{ item.datetimeDebut|date('i') }}</div> #}
                            </time>
                        </div>
                        <div class="tm-box appear-animation" data-appear-animation="fadeInRight"data-appear-animation-delay="100">
                            <h5 class="text-uppercase"><b>{{ item.libelle }} </b></h5>
                            <p>
                               <label class="h5 text-uppercase"> <b>Description :</b> </label> {{ item.description }}
                            </p>
                            <p>
                                <label class="h5 text-uppercase"> <b>Matière :</b> </label> {{ item.matiere.libelle }}
                            </p>
                            <p>
                                <label class="h5 text-uppercase"> <b>Classe :</b> </label> {{ item.classe.libelle }}
                            </p>
                            
                            <div class="tm-meta">
                                {#<span>
                                    <i class="fa fa-clock-o"></i> De <label class="text-primary">{{ item.datetimeDebut|date('H') }}:{{ item.datetimeDebut|date('i') }}</label> à <label class="text-primary">{{ item.datetimeFin|date('H') }}:{{ item.datetimeFin|date('i') }}</label>
                                </span>
                                <span>
                                    <i class="fa fa-download"></i> <a href="{{ DOCUMENT_COURS }}/{{ item.document }}">{{ item.document }}</a>
                                </span> #}
                                {% if date('now')|date('Y-m-d H:i:m') > item.dateCompo|date('Y-m-d H:i:m') and 
                                    ( 'enseignant' in UserDetails.profiles) %}                                    
                                    <span>
                                        <i class="fa fa-comment-o"></i>  <a href="{{path('evaluation_note_student',{'classe_id':item.classe.id,'evaluation_id':item.id})}}">Noter les élèves</a>
                                    </span>
                                 {% endif %}
                            </div>
                        </div>
                    </li>
                </ol>
                
            {% endfor %}
        </div>
    </div>
    {#<section class="panel">
        <div class="panel-body">
            <div class="row">
                <div class="col-md-9">
                    <div id="calendar"></div>
                </div>
                <div class="col-md-3">
                  
                      <small id="helpId" class="form-text text-muted">A la fin du cours cliquez sur ce dernier dans le calendrier pour donner votre avis</small>
                    {% if allCours is empty %}
                        <h2 class="text-center text-danger">Aucun cours programmer</h2>
                    {% endif %}

                </div>
            </div>
        </div>
    </section>#}

{% endblock %}
{% block javascripts %}
    <script src="{{ asset('assets/vendor/select2/select2.js') }} "></script>
    <script src="{{ asset('assets/vendor/jquery-datatables/media/js/jquery.dataTables.js') }} "></script>
    <script src="{{ asset('assets/vendor/jquery-datatables/extras/TableTools/js/dataTables.tableTools.min.js') }} "></script>
    <script src="{{ asset('assets/vendor/jquery-datatables-bs3/assets/js/datatables.js') }} "></script>
    <script src="{{ asset('assets/vendor/pnotify/pnotify.custom.js') }}"></script>
    <script src="{{ asset('assets/javascripts/ui-elements/examples.modals.js') }}"></script>
    <script src="{{ asset('assets/javascripts/tables/examples.datatables.default.js') }}"></script>

    <script src="{{ asset('assets/vendor/jquery-ui/js/jquery-ui-1.10.4.custom.js') }}"></script>
    <script src="{{ asset('assets/vendor/jquery-ui-touch-punch/jquery.ui.touch-punch.js') }}"></script>
    <script src="{{ asset('assets/vendor/fullcalendar/lib/moment.min.js') }}"></script>
    <script src="{{ asset('assets/vendor/fullcalendar/fullcalendar.js') }}"></script>
    <script src="{{ asset('assets/vendor/jquery-appear/jquery.appear.js') }}"></script>
    <script src="{{ asset('assets/vendor/gmaps/gmaps.js') }}"></script>
    <!-- Examples -->

    <script>
        (function( $ ) {

            'use strict';

            var initLightbox = function() {
                $('.timeline .thumbnail-gallery').magnificPopup({
                    delegate: 'a',
                    type: 'image',
                    tLoading: 'Loading image #%curr%...',
                    mainClass: 'mfp-img-mobile',
                    gallery: {
                        enabled: true,
                        navigateByImgClick: true,
                        preload: [0,1] // Will preload 0 - before current, and 1 after the current image
                    },
                    image: {
                        tError: '<a href="%url%">The image #%curr%</a> could not be loaded.'
                    }
                });
            };

           
        }).apply(this, [ jQuery ]);
    </script>
    
{% endblock %}
